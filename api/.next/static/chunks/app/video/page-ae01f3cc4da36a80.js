(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[272],{8941:function(e,t,r){Promise.resolve().then(r.bind(r,8367))},8367:function(e,t,r){"use strict";r.r(t);var n=r(7437),c=r(2265),i=r(3107);r(8792),t.default=()=>{let e=(0,c.useRef)(null),t=(0,c.useRef)(null),r=(0,c.useRef)(null),[o,a]=(0,c.useState)(!1),[l,s]=(0,c.useState)(!1),[d,u]=(0,c.useState)(null),[h,p]=(0,c.useState)(null),[g,b]=(0,c.useState)(!1),j=async()=>{try{let t=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),r=e.current;r&&(r.srcObject=t),a(!0)}catch(e){console.error("Error accessing media devices:",e)}},m=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let n=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0});if(e){let e=prompt("Enter your meeting URL:");e&&await y(e)}let c=t.current;c&&(c.srcObject=n);let i=[],o=new MediaRecorder(n,{mimeType:"video/webm"});o.ondataavailable=e=>{e.data.size>0&&i.push(e.data)},o.onstop=()=>{let e=new Blob(i,{type:"video/webm"}),t=URL.createObjectURL(e);p(t),u(e),n.getTracks().forEach(e=>e.stop())},o.start(),r.current=o,s(!0),n.getVideoTracks()[0].onended=()=>{v()}}catch(e){console.error("Screen recording error:",e)}},v=()=>{if(r.current){r.current.stop();let e=t.current;e&&e.srcObject&&(e.srcObject.getTracks().forEach(e=>e.stop()),e.srcObject=null),s(!1)}},y=async e=>{try{let t=await i.Z.post("https://".concat(config.recallRegion,".recall.ai/api/v1/bot"),{bot_name:"ZoomBot",meeting_url:e,transcription_options:{provider:"meeting_captions"}},{headers:{Authorization:"Token ".concat(config.recallApiKey),Accept:"application/json","Content-Type":"application/json"}});return b(!0),t.data}catch(e){return console.error("Error creating Recall AI bot:",e),alert("Failed to create bot"),null}};return(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:"Media Streaming & Screen Recording"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{children:"Camera Stream"}),(0,n.jsx)("video",{ref:e,autoPlay:!0,playsInline:!0,width:"640",height:"480",style:{display:o?"block":"none"}}),o?(0,n.jsx)("button",{onClick:()=>{let t=e.current;t&&t.srcObject&&(t.srcObject.getTracks().forEach(e=>e.stop()),t.srcObject=null,a(!1))},children:"Stop Camera"}):(0,n.jsx)("button",{onClick:j,children:"Start Camera"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{children:"Screen Recording"}),(0,n.jsx)("video",{ref:t,autoPlay:!0,playsInline:!0,width:"640",height:"480",style:{display:l?"block":"none"}}),l?(0,n.jsx)("button",{onClick:v,children:"Stop Screen Recording"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>m(),children:"Start Screen Recording"}),(0,n.jsx)("button",{onClick:()=>m(!0),children:"Start Recording with Recall AI Bot (with Transcription)"})]})]}),g&&(0,n.jsx)("div",{style:{color:"green",margin:"10px 0"},children:"Recall AI Bot Created Successfully with Transcription!"}),d&&h&&(0,n.jsx)("div",{style:{marginTop:"20px"},children:(0,n.jsx)("a",{href:h,download:"recorded-video.webm",children:(0,n.jsx)("button",{children:"Download Recording"})})})]})}}},function(e){e.O(0,[501,971,69,744],function(){return e(e.s=8941)}),_N_E=e.O()}]);